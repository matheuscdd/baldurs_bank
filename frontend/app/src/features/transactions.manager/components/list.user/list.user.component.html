<p-toast position="bottom-right" />
@if (users.length) {
<p-table [value]="users" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template #header>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Status</th>
            <th>Type</th>
            <th>Account</th>
            <th>Balance</th>
            <th>Delete</th>
        </tr>
    </ng-template>
    <ng-template #body let-el>
        <tr>
            <td>{{ el.Name }}</td>
            <td>{{ el.Email }}</td>
            <td>{{ el.IsActive ? 'Active' : 'Inactive' }}</td>
            <td>{{ el.IsManager ? 'Manager' : 'Regular' }}</td>
            <td>{{ el.IsManager ? 'N/A' : accountsMap[el.Id]?.Number || 'Inactive' }}</td>
            <td>
                <p-button [disabled]="el.IsManager || !accountsMap[el.Id]?.IsActive" severity="info" icon="pi pi-eye" (click)="showBalance(accountsMap[el.Id]?.Id, accountsMap[el.Id]?.Number)" />
            </td>
            <td>
                <p-button [disabled]="el.IsManager || !accountsMap[el.Id]?.IsActive" severity="danger" icon="pi pi-trash" (click)="showDelection(accountsMap[el.Id]?.Id, accountsMap[el.Id]?.Number)" />
            </td>
        </tr>
    </ng-template>
</p-table>
}

<p-dialog [header]="`Current Balance ${currentAccountNumber}`" [modal]="true" [(visible)]="visibleModalBalance" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block mb-8">{{ transactionService.formatCurrency(currentBalance) }}</span>
    <div class="flex justify-end gap-2">
        <p-button label="Close" severity="secondary" (click)="visibleModalBalance = false" />
    </div>
</p-dialog>

<p-dialog [header]="`Delete ${currentAccountNumber}`" [modal]="true" [(visible)]="visibileModalDel" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block mb-8">Are you sure you want to remove this account?</span>
    <div class="flex justify-end gap-2">
        <p-button label="Close" severity="secondary" (click)="visibileModalDel = false" />
        <p-button label="Remove" (click)="confirmDelection()" />
    </div>
</p-dialog>